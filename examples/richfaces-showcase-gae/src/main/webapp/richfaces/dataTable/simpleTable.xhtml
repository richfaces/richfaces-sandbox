<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

<ui:composition>
	<p>This sample shows simple master-detail table implemented using<b>
	tbl:dataTable</b> and<b> tbl:subtable</b> components</p>
	<rich:dataTable width="700" var="record"
		value="#{reportBean.expReport.records}">
		<f:facet name="header">
			<rich:columnGroup>
				<rich:column rowspan="2">
				</rich:column>
				<rich:column colspan="3">
					<h:outputText value="Expenses" />
				</rich:column>
				<rich:column rowspan="2">
					<h:outputText value="subtotals" />
				</rich:column>
				<rich:column breakRowBefore="true">
					<h:outputText value="Meals" />
				</rich:column>
				<rich:column>
					<h:outputText value="Hotels" />
				</rich:column>
				<rich:column>
					<h:outputText value="Transport" />
				</rich:column>
			</rich:columnGroup>
		</f:facet>

		<rich:column colspan="5">
			<h:outputText value="#{record.city}" />
		</rich:column>

		<rich:subTable var="expense" value="#{record.items}">
				<rich:column>
					<h:outputText value="#{expense.day}"></h:outputText>
					<f:facet name="footer">
						<div></div>
					</f:facet>
				</rich:column>
				<rich:column>
					<h:outputText value="#{expense.meals}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
					<f:facet name="footer">
						<h:outputText value="#{record.totalMeals}">
							<f:convertNumber pattern="$####.00" />
						</h:outputText>
					</f:facet>
				</rich:column>
				<rich:column>
					<h:outputText value="#{expense.hotels}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
					<f:facet name="footer">
						<h:outputText value="#{record.totalHotels}">
							<f:convertNumber pattern="$####.00" />
						</h:outputText>
					</f:facet>
				</rich:column>

			<rich:column>
				<h:outputText value="#{expense.transport}">
					<f:convertNumber pattern="$####.00" />
				</h:outputText>
				<f:facet name="footer">
					<h:outputText value="#{record.totalTransport}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
				</f:facet>
			</rich:column>
			<rich:column>

				<f:facet name="footer">
					<h:outputText value="#{record.total}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
				</f:facet>
			</rich:column>

		</rich:subTable>

		<f:facet name="footer">

			<rich:columnGroup>
				<rich:column>Totals</rich:column>
				<rich:column>
					<h:outputText value="#{reportBean.expReport.totalMeals}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
				</rich:column>
				<rich:column>
					<h:outputText value="#{reportBean.expReport.totalHotels}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
				</rich:column>
				<rich:column>
					<h:outputText value="#{reportBean.expReport.totalTransport}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
				</rich:column>
				<rich:column>
					<h:outputText value="#{reportBean.expReport.grandTotal}">
						<f:convertNumber pattern="$####.00" />
					</h:outputText>
				</rich:column>
			</rich:columnGroup>
		</f:facet>

	</rich:dataTable>

</ui:composition>
</html>